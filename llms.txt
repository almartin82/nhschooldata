# nhschooldata

**[Documentation](https://almartin82.github.io/nhschooldata/)** \|
**[Getting
Started](https://almartin82.github.io/nhschooldata/articles/enrollment_hooks.html)**

Part of the [njschooldata](https://github.com/almartin82/njschooldata)
family of state education data packages, providing a consistent
interface for accessing school enrollment data across all 50 states.

Fetch and analyze New Hampshire school enrollment data from the NH
Department of Education in R or Python.

## What can you find with nhschooldata?

**10 years of enrollment data (2015-2025).** Approximately 165,000
students. Around 162 districts organized into SAUs. Here are the
analyses you can perform:

------------------------------------------------------------------------

### 1. Explore statewide enrollment trends

Track how New Hampshire’s public school enrollment has changed over
time.

``` r
library(nhschooldata)
library(dplyr)

enr <- fetch_enr_multi(2016:2024, use_cache = TRUE)

statewide <- enr %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(end_year, n_students)

statewide
```

------------------------------------------------------------------------

### 2. Find the largest districts

See which districts serve the most students in New Hampshire.

``` r
enr_2024 <- fetch_enr(2024, use_cache = TRUE)

top_districts <- enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  arrange(desc(n_students)) %>%
  head(10) %>%
  select(district_name, n_students)

top_districts
```

------------------------------------------------------------------------

### 3. Track demographic changes

Monitor how the demographic composition of New Hampshire schools is
changing.

``` r
enr_demo <- fetch_enr_multi(c(2016, 2018, 2020, 2024), use_cache = TRUE)

demographics <- enr_demo %>%
  filter(is_state, grade_level == "TOTAL",
         subgroup %in% c("white", "hispanic", "asian", "black", "multiracial")) %>%
  group_by(end_year) %>%
  mutate(pct = n_students / sum(n_students) * 100) %>%
  ungroup() %>%
  select(end_year, subgroup, pct)

demographics_wide <- demographics %>%
  tidyr::pivot_wider(names_from = subgroup, values_from = pct)

demographics_wide
```

------------------------------------------------------------------------

### 4. Compare regional trends

New Hampshire’s geography creates distinct regional patterns - compare
coastal areas to the North Country.

``` r
seacoast <- c("Portsmouth", "Dover", "Rochester", "Exeter", "Hampton")
north_country <- c("Berlin", "Colebrook", "Lancaster", "Littleton", "Gorham")

enr_regional <- fetch_enr_multi(c(2016, 2018, 2021, 2024), use_cache = TRUE)

regional <- enr_regional %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  mutate(region = case_when(
    grepl(paste(seacoast, collapse = "|"), district_name) ~ "Seacoast",
    grepl(paste(north_country, collapse = "|"), district_name) ~ "North Country",
    TRUE ~ "Other"
  )) %>%
  filter(region %in% c("Seacoast", "North Country")) %>%
  group_by(end_year, region) %>%
  summarize(total = sum(n_students, na.rm = TRUE), .groups = "drop")

regional
```

------------------------------------------------------------------------

### 5. Analyze grade-level trends

Track how enrollment varies across grade levels to understand the
student pipeline.

``` r
enr_grades <- fetch_enr_multi(2016:2024, use_cache = TRUE)

grades <- enr_grades %>%
  filter(is_state, subgroup == "total_enrollment",
         grade_level %in% c("K", "01", "05", "09", "12")) %>%
  select(end_year, grade_level, n_students) %>%
  mutate(grade_label = case_when(
    grade_level == "K" ~ "Kindergarten",
    grade_level == "01" ~ "1st Grade",
    grade_level == "05" ~ "5th Grade",
    grade_level == "09" ~ "9th Grade",
    grade_level == "12" ~ "12th Grade"
  ))

grades
```

------------------------------------------------------------------------

### 6. Understand district size distribution

New Hampshire has many small districts that share administration through
SAUs.

``` r
district_sizes <- enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  mutate(size = case_when(
    n_students >= 3000 ~ "Large (3,000+)",
    n_students >= 1000 ~ "Medium (1,000-2,999)",
    n_students >= 300 ~ "Small (300-999)",
    TRUE ~ "Tiny (<300)"
  )) %>%
  count(size) %>%
  mutate(size = factor(size, levels = c("Tiny (<300)", "Small (300-999)",
                                         "Medium (1,000-2,999)", "Large (3,000+)")))

district_sizes
```

------------------------------------------------------------------------

### 7. Compare Manchester and Nashua

Track the state’s two largest cities and their share of total
enrollment.

``` r
big_cities <- enr %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL",
         grepl("Manchester|Nashua", district_name)) %>%
  group_by(end_year) %>%
  summarize(combined = sum(n_students, na.rm = TRUE), .groups = "drop")

state_totals <- enr %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(end_year, state_total = n_students)

big_cities %>%
  left_join(state_totals, by = "end_year") %>%
  mutate(pct_of_state = round(combined / state_total * 100, 1))
```

------------------------------------------------------------------------

### 8. Track kindergarten pipeline

Monitor kindergarten enrollment to predict future enrollment trends.

``` r
kindergarten <- enr %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "K") %>%
  select(end_year, k_students = n_students)

# Calculate year-over-year change
kindergarten %>%
  mutate(
    change = k_students - lag(k_students),
    pct_change = round(change / lag(k_students) * 100, 1)
  )
```

------------------------------------------------------------------------

### 9. Find the smallest districts

Identify New Hampshire’s tiny districts that rely on SAU administrative
sharing.

``` r
tiny_districts <- enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL",
         n_students < 200) %>%
  arrange(n_students) %>%
  head(10) %>%
  select(district_name, n_students)

tiny_districts
```

------------------------------------------------------------------------

### 10. Track high school enrollment

Follow high school grades (9-12) to understand graduation pipeline.

``` r
high_school <- enr %>%
  filter(is_state, subgroup == "total_enrollment",
         grade_level %in% c("09", "10", "11", "12")) %>%
  group_by(end_year) %>%
  summarize(hs_total = sum(n_students, na.rm = TRUE), .groups = "drop")

high_school
```

------------------------------------------------------------------------

### 11. Compare elementary vs secondary

Track the balance between elementary (K-5) and secondary (6-12)
enrollment.

``` r
elem_grades <- c("K", "01", "02", "03", "04", "05")
sec_grades <- c("06", "07", "08", "09", "10", "11", "12")

level_comparison <- enr %>%
  filter(is_state, subgroup == "total_enrollment") %>%
  mutate(level = case_when(
    grade_level %in% elem_grades ~ "Elementary",
    grade_level %in% sec_grades ~ "Secondary",
    TRUE ~ NA_character_
  )) %>%
  filter(!is.na(level)) %>%
  group_by(end_year, level) %>%
  summarize(students = sum(n_students, na.rm = TRUE), .groups = "drop")

level_comparison
```

------------------------------------------------------------------------

### 12. Identify growing districts

Find districts that have grown over the analysis period.

``` r
growth <- enr %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL",
         end_year %in% c(2016, 2024)) %>%
  select(district_name, end_year, n_students) %>%
  tidyr::pivot_wider(names_from = end_year, values_from = n_students,
                     names_prefix = "y")

# Calculate growth if data exists
if (nrow(growth) > 0 && "y2024" %in% names(growth) && "y2016" %in% names(growth)) {
  growth <- growth %>%
    mutate(
      change = y2024 - y2016,
      pct_change = round(change / y2016 * 100, 1)
    ) %>%
    arrange(desc(pct_change)) %>%
    head(10)
}

growth
```

------------------------------------------------------------------------

### 13. Track middle grades

Monitor grades 6-8 enrollment trends.

``` r
middle_grades <- enr %>%
  filter(is_state, subgroup == "total_enrollment",
         grade_level %in% c("06", "07", "08")) %>%
  group_by(end_year) %>%
  summarize(middle_total = sum(n_students, na.rm = TRUE), .groups = "drop")

middle_grades
```

------------------------------------------------------------------------

### 14. Compare school vs district counts

See how many schools operate within each district size category.

``` r
school_counts <- enr_2024 %>%
  filter(is_campus, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  group_by(district_name) %>%
  summarize(n_schools = n(), .groups = "drop")

district_enrollment <- enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(district_name, district_enrollment = n_students)

school_counts %>%
  left_join(district_enrollment, by = "district_name") %>%
  mutate(avg_school_size = round(district_enrollment / n_schools, 0)) %>%
  arrange(desc(n_schools)) %>%
  head(10)
```

------------------------------------------------------------------------

### 15. Calculate year-over-year state change

Track annual enrollment changes at the state level.

``` r
state_changes <- enr %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  arrange(end_year) %>%
  mutate(
    change = n_students - lag(n_students),
    pct_change = round(change / lag(n_students) * 100, 2)
  ) %>%
  select(end_year, n_students, change, pct_change)

state_changes
```

------------------------------------------------------------------------

## Enrollment Visualizations

See the [full
vignette](https://almartin82.github.io/nhschooldata/articles/enrollment_hooks.html)
for interactive charts and deeper analysis.

## Installation

``` r
# install.packages("remotes")
remotes::install_github("almartin82/nhschooldata")
```

## Quick start

### R

``` r
library(nhschooldata)
library(dplyr)

# Fetch one year
enr_2024 <- fetch_enr(2024)

# Fetch multiple years
enr_recent <- fetch_enr_multi(2019:2024)

# State totals
enr_2024 %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL")

# District breakdown
enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  arrange(desc(n_students))

# Check available years
get_available_years()
```

### Python

``` python
import pynhschooldata as nh

# Fetch one year
enr_2024 = nh.fetch_enr(2024)

# Fetch multiple years
enr_recent = nh.fetch_enr_multi([2019, 2020, 2021, 2022, 2023, 2024])

# State totals
state = enr_2024[
    (enr_2024['is_state']) &
    (enr_2024['subgroup'] == 'total_enrollment') &
    (enr_2024['grade_level'] == 'TOTAL')
]

# District breakdown
districts = enr_2024[
    (enr_2024['is_district']) &
    (enr_2024['subgroup'] == 'total_enrollment') &
    (enr_2024['grade_level'] == 'TOTAL')
].sort_values('n_students', ascending=False)

# Check available years
years = nh.get_available_years()
print(f"Data available from {years['min_year']} to {years['max_year']}")
```

## Data Availability

| Years         | Source           | Notes                            |
|---------------|------------------|----------------------------------|
| **2015-2025** | NH DOE iPlatform | October 1st fall enrollment data |

### What’s included

- **Levels:** State, district (~162), school (~456)
- **Demographics:** White, Black, Hispanic, Asian, Native American,
  Pacific Islander, Two or More Races
- **Gender:** Male, Female (where available)
- **Grade levels:** PK-12 plus totals

## Data Notes

### Data Source

New Hampshire Department of Education iPlatform:
[my.doe.nh.gov/iPlatform](https://my.doe.nh.gov/iPlatform)

### Collection Date

October 1st of each school year (fall enrollment snapshot).

### SAU Structure

New Hampshire uses School Administrative Units (SAUs) to manage
administrative functions for small districts. A single SAU may oversee
multiple small districts sharing a superintendent and central office
staff.

### Data Access Note

The NH DOE iPlatform uses browser-based access that may require manual
download. If automatic download fails, you can:

1.  Visit the iPlatform directly:

    - District enrollment:
      [my.doe.nh.gov/iPlatform](https://my.doe.nh.gov/iPlatform/Report/DataReportsSubCategory?reportSubCategoryId=9)
    - School enrollment:
      [my.doe.nh.gov/iPlatform](https://my.doe.nh.gov/iPlatform/Report/DataReportsSubCategory?reportSubCategoryId=10)

2.  Download the Excel files

3.  Use
    [`import_local_enrollment()`](https://almartin82.github.io/nhschooldata/reference/import_local_enrollment.md)
    to load:

    ``` r
    df <- import_local_enrollment("~/Downloads/enrollment.xlsx", 2024, "district")
    ```

### Year Convention

Years use the END YEAR of the school year: - `2024` = 2023-24 school
year - `2025` = 2024-25 school year

## Part of the State Schooldata Project

This package is part of the
[njschooldata](https://github.com/almartin82/njschooldata) family - a
simple, consistent interface for accessing state-published school data
in Python and R.

**All 50 state packages:**
[github.com/almartin82](https://github.com/almartin82?tab=repositories&q=schooldata)

## Author

[Andy Martin](https://github.com/almartin82) (<almartin@gmail.com>)

## License

MIT

# Package index

## Fetching Data

Functions for downloading enrollment data

- [`fetch_enr()`](https://almartin82.github.io/nhschooldata/reference/fetch_enr.md)
  : Fetch New Hampshire enrollment data
- [`fetch_enr_multi()`](https://almartin82.github.io/nhschooldata/reference/fetch_enr_multi.md)
  : Fetch enrollment data for multiple years
- [`get_available_years()`](https://almartin82.github.io/nhschooldata/reference/get_available_years.md)
  : Get available years for enrollment data

## Data Transformation

Functions for transforming enrollment data

- [`tidy_enr()`](https://almartin82.github.io/nhschooldata/reference/tidy_enr.md)
  : Tidy enrollment data
- [`id_enr_aggs()`](https://almartin82.github.io/nhschooldata/reference/id_enr_aggs.md)
  : Identify enrollment aggregation levels
- [`enr_grade_aggs()`](https://almartin82.github.io/nhschooldata/reference/enr_grade_aggs.md)
  : Custom Enrollment Grade Level Aggregates

## Caching

Functions for managing cached data

- [`cache_status()`](https://almartin82.github.io/nhschooldata/reference/cache_status.md)
  : Show cache status
- [`clear_cache()`](https://almartin82.github.io/nhschooldata/reference/clear_cache.md)
  : Clear the nhschooldata cache

## Manual Import

Functions for importing manually downloaded data

- [`import_local_enrollment()`](https://almartin82.github.io/nhschooldata/reference/import_local_enrollment.md)
  : Import local enrollment file

## Package

- [`nhschooldata-package`](https://almartin82.github.io/nhschooldata/reference/nhschooldata-package.md)
  : nhschooldata: New Hampshire School Data

# Articles

### All vignettes

- [Exploring New Hampshire School Enrollment
  Data](https://almartin82.github.io/nhschooldata/articles/enrollment_hooks.md):
